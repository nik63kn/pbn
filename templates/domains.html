<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Домены</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style type="text/css">
    body {
      padding: 20px 0;
    }
    .pagination {
      margin-top: 20px;
    }
  </style>
</head>
<body>
<div class="container mt-4">
    <h1>Список доменов</h1>
 <div class="alert alert-info mb-3">
    <div class="row">
        <div class="col-md-4">
            <strong>Всего доменов:</strong> {{ total_domains }}
        </div>
        <div class="col-md-4">
            <strong>Текущая страница:</strong> {{ page }} из {{ total_pages }}
        </div>
        <div class="col-md-4">
            <strong>Показано:</strong> {{ domains|length }} доменов
        </div>
    </div>
</div>
    <table class="table table-striped table-bordered table-hover">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Домен</th>
                <th>Дата освобождения</th>
                <th>ИКС</th>
                <th>Возраст</th>
                <th>Юр.</th>
                <th>Ставка</th>
                <th>Links Expired</th>
            </tr>
        </thead>
        <tbody>
       {% for domain in domains %}
            <tr>
                <td>{{ domain.id }}</td>
                <td>{{ domain.domain }}</td>
                <td>{{ domain.time_free }}</td>
                <td>{{ domain.iks }}</td>
                <td>{{ domain.age }}</td>
                <td>{{ domain.is_org }}</td>
                <td>{{ domain.bet }}</td>
                <td>{{ domain.links_expired }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <nav aria-label="Навигация по страницам">
      <ul class="pagination justify-content-center">
        <!-- Кнопка "Назад" -->
        {% if page > 1 %}
          <li class="page-item">
            <a class="page-link" href="{{ url_for('domains_page', page=page-1) }}">Назад</a>
          </li>
        {% else %}
          <li class="page-item disabled">
            <a class="page-link" href="#">Назад</a>
          </li>
        {% endif %}

        <!-- Первые страницы -->
        {% for p in range(1, [5, total_pages + 1]|min) %}
          <li class="page-item {% if p == page %}active{% endif %}">
            <a class="page-link" href="{{ url_for('domains_page', page=p) }}">{{ p }}</a>
          </li>
        {% endfor %}

        <!-- Разделитель, если нужен -->
        {% if total_pages > 9 and page > 4 and page < total_pages - 3 %}
          <li class="page-item disabled">
            <a class="page-link" href="#">...</a>
          </li>
        {% endif %}

        <!-- Текущая страница и соседние (если они не входят в первые/последние 4) -->
        {% if page > 4 and page < total_pages - 3 %}
          {% for p in range([page - 1, 5]|max, [page + 2, total_pages - 3]|min) %}
            <li class="page-item {% if p == page %}active{% endif %}">
              <a class="page-link" href="{{ url_for('domains_page', page=p) }}">{{ p }}</a>
            </li>
          {% endfor %}
        {% endif %}

        <!-- Разделитель, если нужен -->
        {% if total_pages > 9 and page < total_pages - 3 %}
          <li class="page-item disabled">
            <a class="page-link" href="#">...</a>
          </li>
        {% endif %}

        <!-- Последние страницы -->
        {% if total_pages > 4 %}
          {% for p in range([total_pages - 3, 5]|max, total_pages + 1) %}
            <li class="page-item {% if p == page %}active{% endif %}">
              <a class="page-link" href="{{ url_for('domains_page', page=p) }}">{{ p }}</a>
            </li>
          {% endfor %}
        {% endif %}

        <!-- Кнопка "Вперёд" -->
        {% if page < total_pages %}
          <li class="page-item">
            <a class="page-link" href="{{ url_for('domains_page', page=page+1) }}">Вперёд</a>
          </li>
        {% else %}
          <li class="page-item disabled">
            <a class="page-link" href="#">Вперёд</a>
          </li>
        {% endif %}
      </ul>
    </nav>
</div>

<!-- Bootstrap JS Bundle с Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
